<?phpclass Contact extends Controller{	public $helpers = array('Html', 'HtmlTemplate', 'Form', );	public $package = 'Contact';	/* ***************************************** FORM VALIDATOR ******************************************/	protected $formValidator = array(		// Form for adding contact		'form_add_contact'	=> array(			'name'	=> array(				'minLen'	=> array(					'rule'		=> array('minLen', 1),					'error'		=> 'Du kannst auch ein Pseudonym benutzen',				),			),			'message'	=> array(				'minLen'	=> array(					'rule'	=> array('minLen', 5),					'error'	=> 'Du solltest schon etwas schreiben.',				),			),			'subject'	=> array(				'between'	=> array(					'rule'	=> array('between', array(1,4)),					'error'	=> 'Ung&uuml;ltige Auswahl',				),			),			'email'	=> array(				'isEmail'	=> array(					'rule'	=> array('isEmail'),					'error'	=> 'Ung&uuml;ltige Email.',				),			),		),	);	/* **********************************************************************************************************************	*	*   S E T T I N G S	*	* **********************************************************************************************************************/	private	$subjectArr = array(		array('id' => '0', 'value' => '- Bitte ausw&auml;hlen -'),		array('id' => '1', 'value' => 'Allgemeine Anfrage'),		array('id' => '2', 'value' => 'Anregungen'),		array('id' => '3', 'value' => 'Fehler entdeckt'),		array('id' => '4', 'value' => 'Beschwerde'),	);	/* **********************************************************************************************************************	*	*   F U N C T I O N S	*	* **********************************************************************************************************************/	public function add()	{		// ------------------------- FORM SUBMITTED AND VALID -------------------------		if ( $this->validateForm('form_add_contact')  )		{			// ------------------------- GET FORM VALUES -------------------------			$name		= $this->form->getValue('name');			$email		= $this->form->getValue('email');			$subject	= $this->form->getValue('subject');			$message	= $this->form->getValue('message');			$name		= Strings::removeTags($name);			$email		= Strings::removeTags($email);			$message	= Strings::removeTags($message);			$this->model->Contact->add($this->user->id(), $name, $email, $subject, $message);			$this->redirect(__CLASS__, 'success', array($name, $email, $subject));			return;		}		// VIEW VARIABLES		$this->set('subject', $this->subjectArr);		// VIEW OPTIONS		$this->view('contact.tpl.php');	}	public function success($name = null, $email = null, $subject = null)	{		if ( is_null($name) || is_null($email) || is_null($subject) )		{			$this->redirect(__CLASS__, 'add');			return;		}		// VIEW VARIABLES		$this->set('name', $name);		$this->set('email', $email);		$this->set('subject', $subject);		// VIEW OPTIONS		$this->view('contact_submitted.tpl.php');	}}?>